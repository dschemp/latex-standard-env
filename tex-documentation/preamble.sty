% Standard packages
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{empheq}
\usepackage{xcolor}
\usepackage[ngerman]{babel} % German language pack
\usepackage{float}
\usepackage[top=3cm,bottom=3.5cm,left=2.5cm,right=2.5cm]{geometry}
\usepackage{tikz}

% Tables
\usepackage{makecell}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{ragged2e}

% Graphics
\usepackage{graphicx}

% Hyperlinks
\usepackage[pdfusetitle]{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black!60!cyan
}

% Checklist
\newlist{todolist}{itemize}{2}
\setlist[todolist]{label=$\square$}
\usepackage{pifont}
\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%
\newcommand{\done}{\rlap{$\square$}{\raisebox{2pt}{\large\hspace{1pt}\cmark}}%
\hspace{-2.5pt}}
\newcommand{\wontfix}{\rlap{$\square$}{\large\hspace{1pt}\xmark}}

% use unicode-math
\usepackage{unicode-math}
% font fixes
\usepackage{microtype}

% quotes (") will be transformed into german style
\usepackage{csquotes}
\MakeOuterQuote{"}

% setup fonts
\usepackage{fontspec}
\setmainfont[
    Ligatures=TeX,
    UprightFont=*,
    ItalicFont=* Italic,
    BoldFont=* Bold,
    BoldItalicFont=* Bold Italic
]{Libertinus Serif}

\setsansfont[
    Ligatures=TeX,
    UprightFont=*,
    ItalicFont=* Italic,
    BoldFont=* Bold
]{Libertinus Sans}

\setmathfont[
    Ligatures=TeX,
    AutoFakeBold
]{Libertinus Math}

\setmonofont[
    Ligatures=TeX,
    UprightFont=* Medium,
    BoldFont=* Bold
]{Inconsolata}

% enable Font Awesome 5
\usepackage{fontawesome5}
\let\orighref\href
% \href now colors the link text and adds the Font Awesome Link symbol at the end
\renewcommand{\href}[2]{\orighref{#1}{#2\,{\scriptsize\faLink}}}

% Tables
\renewcommand\theadalign{bc}
\renewcommand\theadfont{\bfseries}
\renewcommand\theadgape{\Gape[4pt]}
\renewcommand\cellgape{\Gape[4pt]}

% Header & Footer
\usepackage{fancyhdr}
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyhead[R]{\leftmark}
    \fancyfoot[R]{\thepage}
    \fancyfoot[L]{\rightmark}
    
    \renewcommand{\headrulewidth}{.5pt}
    \renewcommand{\footrulewidth}{.5pt}
}

% don't indent paragraphs
\usepackage{parskip}

% horizontal rule
\newcommand\hr{
    \noindent\rule[0.5ex]{\linewidth}{0.5pt}
}

% replace underline
\usepackage[normalem]{ulem}
\renewcommand{\ULdepth}{1.8pt}
\let\origunderline\underline
\renewcommand{\underline}[1]{\uline{#1}}

% enable use of Material Design colors
\usepackage{xcolor-material}

% SI units
\usepackage{siunitx}
\sisetup{
    output-decimal-marker = {,},
    per-mode = symbol,
}

% optional title page
\usetikzlibrary{fadings}
\newcommand{\maketitleBackgroundPath}{title-page.jpg}
\let\origmaketitle\maketitle
\renewcommand{\maketitle}{
    \origmaketitle

    \IfFileExists{\maketitleBackgroundPath} {
        \thispagestyle{empty}
        \tikz[remember picture,overlay] 
            \node[opacity=0.5,outer sep=0pt,inner sep=0pt, scope fading=north]
                at (current page.center){\includegraphics[width=\paperwidth,height=\paperheight]{\maketitleBackgroundPath}};
        \clearpage
    }{}
}
