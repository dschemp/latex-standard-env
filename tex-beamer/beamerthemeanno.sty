\ProvidesPackage{beamerthemeanno}[2020/11/08]

\usepackage{eso-pic}
\usepackage{microtype}

\newif\if@doSans
\@doSansfalse
\DeclareOption{noserifmath}{\@doSanstrue}
\newif\if@doSectionPage
\@doSectionPagefalse
\DeclareOption{nosectionpages}{\@doSectionPagetrue}
\ProcessOptions

\mode<presentation>

%---------------------------------------------------------------------
% TOC
%---------------------------------------------------------------------
\useoutertheme[subsection=false,shadow]{miniframes}
\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}[subsections numbered]

%---------------------------------------------------------------------
% custom commands
%---------------------------------------------------------------------
\newcommand{\rightTextArrow}{$\blacktriangleright$}
\newcommand{\rightTextArrowTwo}{$\diamond$}
\newcommand{\rightTextArrowThree}{$\star$}
\newcommand{\quoted}[1]{›#1‹}
\newcommand{\doublequoted}[1]{»#1«}

%---------------------------------------------------------------------
% Colors
%---------------------------------------------------------------------

% Primary Colors
\definecolor{annoRed}{rgb}{0.882352941,0,0.098039216}
\definecolor{annoRedDark}{rgb}{0.588235294,0,0.058823529}
\definecolor{annoWarmGreyDark}{rgb}{0.274509804,0.254901961,0.235294118}
\definecolor{annoWarmGreyLight}{rgb}{0.666666667,0.647058824,0.62745098}

% Secondary Colors
\definecolor{annoSec1}{rgb}{0,0.588235294,0.509803922}
\definecolor{annoSec1Dark}{rgb}{0,0.392156863,0.31372549}
\definecolor{annoSec1Comp}{rgb}{0.294117647,0.745098039,0.882352941}
\definecolor{annoSec1CompDark}{rgb}{0.196078431,0.490196078,0.568627451}

\definecolor{annoSec2}{rgb}{0.607843137,0.764705882,0.156862745}
\definecolor{annoSec2Dark}{rgb}{0.411764706,0.490196078,0.098039216}
\definecolor{annoSec2Comp}{rgb}{0.254901961,0.156862745,0.509803922}
\definecolor{annoSec2CompDark}{rgb}{0.176470588,0.098039216,0.333333333}

\definecolor{annoSec3}{rgb}{0.509803922,0.078431373,0.31372549}
\definecolor{annoSec3Dark}{rgb}{0.338345865,0.058823529,0.196078431}
\definecolor{annoSec3Comp}{rgb}{1,0.509803922,0}
\definecolor{annoSec3CompDark}{rgb}{0.666666667,0.333333333,0}

% General
\setbeamercolor{normal text}{fg=annoWarmGreyDark}
\setbeamercolor{structure}{fg=annoWarmGreyDark}
\setbeamercolor{alerted text}{fg=annoRed}
\setbeamercolor{example text}{fg=white}
\setbeamercolor{copyright text}{fg=annoWarmGreyLight}
\setbeamercolor{palette primary}{fg=annoWarmGreyDark}
\setbeamercolor{palette secondary}{fg=annoWarmGreyDark,bg=annoWarmGreyLight}
\setbeamercolor{palette tertiary}{fg=black,bg=annoWarmGreyLight}
\setbeamercolor{palette quaternary}{fg=white, bg=annoWarmGreyDark}
% Titlepage
\setbeamercolor{title}{parent=normal text}
\setbeamercolor{subtitle}{parent=normal text}
\setbeamercolor{institute}{parent=normal text}
% Content
\setbeamercolor{frametitle}{parent=palette quaternary}
% Blocks
\setbeamercolor{block title}{parent=palette quaternary}
\setbeamercolor{block body}{parent=palette secondary}
\setbeamercolor{block title example}{fg=white, bg=annoSec1Dark}
\setbeamercolor{block body example}{fg=white, bg=annoSec1}
\setbeamercolor{block title alerted}{fg=white, bg=annoRedDark}
\setbeamercolor{block body alerted}{fg=white, bg=annoRed}
% Notes
\setbeamercolor{note page}{fg=annoWarmGreyDark,bg=annoWarmGreyLight}
\setbeamercolor{note title}{fg=white, bg=annoWarmGreyDark}
\setbeamercolor{note date}{parent=note title}
% Page Number
\setbeamercolor{page number in head/foot}{fg=annoWarmGreyDark}

%---------------------------------------------------------------------
% Fonts
%---------------------------------------------------------------------

% General

% Declare fontfamilys
% Sans serif math option
\if@doSans%
    % sans serif math %
    \usepackage[no-math]{fontspec}%
    \setmainfont{Barlow}%
\else%
    % serif math %
    \usepackage{fontspec}%
    \usefonttheme[onlymath]{serif}%
\fi%
\newfontfamily\Light{Barlow Light}%
\newfontfamily\Regular{Barlow Regular}%
\newfontfamily\Medium{Barlow Medium}%
\newfontfamily\SemiBold{Barlow SemiBold}%
\newfontfamily\Bold{Barlow Bold}%
\newfontfamily\Book{Barlow Bold}%
\setsansfont{Barlow}%

\setmonofont[%
    Ligatures=TeX,%
    UprightFont=* Medium,%
    BoldFont=* Bold%
]{Inconsolata}%

\renewcommand\UrlFont{\Medium}
% Titlepage
\setbeamerfont{title}{family=\Light,size=\fontsize{20}{20}}
\setbeamerfont{subtitle}{family=\Light,size=\fontsize{12}{14}}
\setbeamerfont{date}{size=\fontsize{8}{10}}
\setbeamerfont{author}{size=\fontsize{12}{15}}
\setbeamerfont{institute}{size=\fontsize{8}{10}}
% Section
\setbeamerfont{section title}{family=\Medium,size=\LARGE}
% Content
\setbeamerfont{frametitle}{family=\Medium,size=\large}
\setbeamerfont{copyright text}{family=\Regular,size=\tiny}
\setbeamerfont{block title}{family=\Medium,size=\large}
\setbeamerfont{block title alerted}{family=\Medium,size=\large}
\setbeamerfont{alerted text}{family=\Medium}
% Captions
\setbeamerfont{caption name}{family=\Book}

%---------------------------------------------------------------------
% Titlepage
%---------------------------------------------------------------------

% Titlepage structure
\def\maketitle{\ifbeamer@inframe\titlepage\else\frame[plain]{\titlepage}\fi}
\def\titlepage{\usebeamertemplate{title page}}
\setbeamertemplate{title page}
{
    % Add background to title page
    \IfFileExists{background.pdf}{
        \AddToShipoutPictureFG*{\includegraphics[width=\paperwidth]{background.pdf}}
    }{}
    \begin{minipage}[b][\paperheight]{\textwidth}
    \vspace*{5mm}
    \IfFileExists{logo.eps}{
        \includegraphics[height=10mm]{logo.eps}\par
        \vspace*{1mm}
    }{\vspace*{5mm}}
    \ifx\insertsubtitle\@empty%
    \else%
        {\usebeamerfont{title}\usebeamercolor[fg]{title}\MakeUppercase{\inserttitle}\par}%
    \fi%
    \ifx\insertsubtitle\@empty%
    \else%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
        \vspace*{5mm}
    \fi%
    \ifx\insertdate\@empty%
    \else%
        {\usebeamerfont{date}\usebeamercolor[fg]{date}\insertdate\par}%
    \fi%

    \vfill

    \ifx\insertauthor\@empty%
    \else%
        {\usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor\par}%
    \fi%
    \ifx\insertinstitut\@empty%
    \else%
        \vspace*{3mm}
        {\usebeamerfont{institute}\usebeamercolor[fg]{institute}\insertinstitute\par}%
    \fi%
    \vspace*{5mm}
    \end{minipage}
}

%---------------------------------------------------------------------
% Sectionpages
%---------------------------------------------------------------------

\if@doSectionPage\@empty
\else
% Insert frame with section title at every section start
\AtBeginSection[]
{
\begingroup
\setbeamercolor{background canvas}{bg=annoWarmGreyDark}
\begin{frame}[plain]
\centering
\vfill\usebeamerfont{section title}\textcolor{white}{\insertsectionhead}\vfill
\end{frame}
\endgroup
}
\fi

%---------------------------------------------------------------------
% Frametitle
%---------------------------------------------------------------------
\setbeamertemplate{frametitle}
{
\begin{beamercolorbox}[wd=\paperwidth,leftskip=0.3cm,rightskip=0.3cm,ht=3ex,dp=1.5ex]{frametitle}
     \usebeamerfont{frametitle}\insertframetitle%
\end{beamercolorbox}
}

%---------------------------------------------------------------------
% Footline
%---------------------------------------------------------------------
\usenavigationsymbolstemplate{}
\setbeamertemplate{footline}
{%
\begin{beamercolorbox}[wd=\textwidth,ht=3ex,dp=1em,rightskip=1.3em]{structure}%
\hfill\usebeamerfont{page number in head/foot}%
\insertframenumber%
\end{beamercolorbox}%
}

%---------------------------------------------------------------------
% Captions
%---------------------------------------------------------------------
\setbeamertemplate{caption}[numbered]{}
\setbeamertemplate{caption label separator}{\hspace*{1ex}}

%---------------------------------------------------------------------
% Blocks
%---------------------------------------------------------------------

\newcommand{\newblocktype}[5]{
  \setbeamertemplate{#1}
  {
    \setbeamercolor{item}{parent=#2}
    \par\vskip\medskipamount%
    \begin{beamercolorbox}[sep=1ex,dp=0ex,leftskip=0.5ex,rightskip=0.5ex]{#3}
        \usebeamerfont*{#3}\insertblocktitle%
    \end{beamercolorbox}%
    {\parskip0pt\par}%
    {\nointerlineskip\vskip-0.5pt}%
    \usebeamerfont{#4}%
    \begin{beamercolorbox}[sep=1ex,dp=0ex,leftskip=0.5ex,rightskip=0.5ex,vmode]{#4}%
  }
  \setbeamertemplate{#5}
  {\end{beamercolorbox}\vskip\smallskipamount}
}

\newblocktype{block begin}{block body}{block title}{block body}{block end}
\newblocktype{block alerted begin}{block body alerted}{block title alerted}{block body alerted}{block alerted end}
\newblocktype{block example begin}{block body}{block title example}{block body example}{block example end}

%---------------------------------------------------------------------
% Itemize, Enumerate and Description
%---------------------------------------------------------------------
\setbeamertemplate{itemize item}{\rightTextArrow}
\setbeamertemplate{itemize subitem}{\rightTextArrowTwo}
\setbeamertemplate{itemize subsubitem}{\rightTextArrowThree}

\setbeamertemplate{enumerate item}{\insertenumlabel} % Don't show dot after number
\setbeamerfont{enumerate item}{family=\SemiBold}
\setbeamerfont{enumerate subitem}{family=\SemiBold}
\setbeamerfont{enumerate subsubitem}{family=\SemiBold}

\setlength{\parskip}{0.5em}
\setbeamerfont{description item}{family=\SemiBold}

%---------------------------------------------------------------------
% Images
%---------------------------------------------------------------------

\newbox\mytempbox
\newdimen\mytempdimen

\newcommand\includegraphicscopyright[3][]{%
  \leavevmode\vbox{\vskip3pt\raggedright\setbox\mytempbox=\hbox{\includegraphics[#1]{#2}}%
    \mytempdimen=\wd\mytempbox\box\mytempbox\par\vskip1pt%
    \usebeamerfont{copyright text}{\usebeamercolor[fg]{copyright text}{\vbox{\hsize=\mytempdimen#3}}}\vskip3pt%
}}

\mode
<all>
